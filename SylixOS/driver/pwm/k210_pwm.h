/*********************************************************************************************************
**
**                                    中国软件开源组织
**
**                                   嵌入式实时操作系统
**
**                                       SylixOS(TM)
**
**                               Copyright  All Rights Reserved
**
**--------------文件信息--------------------------------------------------------------------------------
**
** 文   件   名: k210_pwm.h
**
** 创   建   人: Yu.KangZhi (余康志)
**
** 文件创建日期: 2018 年 10 月 22 日
**
** 描        述: PWM 控制器驱动头文件
*********************************************************************************************************/
#ifndef __K210_PWM_H
#define __K210_PWM_H
/*********************************************************************************************************
  包含IOCTL命令定义相关头文件
*********************************************************************************************************/
#include <sys/ioccom.h>
/*********************************************************************************************************
  Kendryte K210 PWM 命令配置宏
*********************************************************************************************************/
#define SET_PWM_FREQUENCY         _IO('p',0x01)
#define GET_PWM_FREQUENCY         _IO('p',0x02)
#define SET_PWM_CHANNEL_ENABLE    _IO('p',0x03)
#define SET_PWM_CHANNEL_DISABLE   _IO('p',0x04)
#define SET_PWM_ACTIVE_PERCENT    _IO('p',0x05)

#define CMD_PWM_CHANNEL_0         (0)
#define CMD_PWM_CHANNEL_1         (1)
#define CMD_PWM_CHANNEL_2         (2)
#define CMD_PWM_CHANNEL_3         (3)
/*********************************************************************************************************
  PWM 控制消息结构体
*********************************************************************************************************/
typedef struct {
    UINT        uiChannel;                                              /*          PWM 通道号          */
    double      frequency;                                              /*          PWM 输出频率        */
    double      duty;                                                   /*          PWM 占空比          */
} pwm_ctrl_msg_t;
/*********************************************************************************************************
** 函数名称: k210PwmDrv
** 功能描述: 安装 PWM 驱动
** 输　入  : NONE
** 输　出  : ERROR_CODE
** 全局变量:
** 调用模块:
*********************************************************************************************************/
INT  k210PwmDrv(VOID);
/*********************************************************************************************************
** 函数名称: k210PwmDevAdd
** 功能描述: 创建 PWM 设备
** 输　入  : uiChannel         通道号
** 输　出  : ERROR_CODE
** 全局变量:
** 调用模块:
*********************************************************************************************************/
INT  k210PwmDevAdd(UINT  uiPwmInstance);

#endif                                                                  /*      __K210_PWM_H            */
/*********************************************************************************************************
  END
*********************************************************************************************************/
